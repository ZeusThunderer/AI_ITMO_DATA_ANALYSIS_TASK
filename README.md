# WORK IN PROGRESS
# Анализ данных транзакций для обнаружения мошенничества

## Описание задания

Проведен комплексный анализ данных транзакций для выявления мошеннических операций с последующей разработкой продуктовых и технических гипотез для создания системы обнаружения мошенничества.

## Процесс выполнения задания

### Этап 1: Первичный анализ данных
1. **Изучение структуры данных** - анализ файлов `transaction_fraud_data.parquet` и `historical_currency_exchange.parquet`
2. **Разработка скрипта EDA** - создание комплексного анализа в `eda/eda.py`
3. **Выполнение базового анализа** - получение первичных инсайтов о данных

### Этап 2: Конвертация валют
1. **Анализ курсов валют** - изучение файла `historical_currency_exchange.parquet`
2. **Разработка функции конвертации** - создание `convert_to_usd()` для перевода всех сумм в доллары США
3. **Обновление анализа** - повторный запуск EDA с конвертированными данными

### Этап 3: Формирование гипотез
1. **Продуктовые гипотезы** - разработка бизнес-гипотез на основе выявленных паттернов
2. **Технические гипотезы** - создание технических решений для реализации системы
3. **Приоритизация** - ранжирование гипотез по важности и сложности реализации

## Инструментарий

### Технологии и библиотеки
- **Python 3.x** - основной язык программирования
- **Pandas** - обработка и анализ данных
- **NumPy** - численные вычисления
- **Matplotlib & Seaborn** - визуализация данных
- **Cursor** - для упрощения написания кода

### Структура проекта
```
AI_ITMO_DATA_ANALYSIS_TASK/
├── data/
│   ├── transaction_fraud_data.parquet    # Основной датасет транзакций
│   ├── historical_currency_exchange.parquet  # Курсы валют для конвертации
│   └── README.md                         # Описание данных
├── eda/
│   ├── eda.py                           # Основной скрипт EDA
│   ├── eda_results.txt                  # Результаты анализа
│   ├── analysis_with_usd_conversion.md  # Анализ с конвертацией в USD
│   └── plots/                           # Графики и визуализации (9 файлов)
├── product_hypotheses.md                # Продуктовые гипотезы
├── technical_hypotheses.md              # Технические гипотезы
└── README.md                           # Основной README (этот файл)
```

## Ключевые результаты анализа

### 1. Конвертация валют
- ✅ **Все суммы транзакций конвертированы в доллары США**
- ✅ Использованы исторические курсы валют на дату транзакции
- ✅ Обеспечена единообразность анализа для международных транзакций

### 2. Основные инсайты

#### Финансовые паттерны:
- **Мошеннические транзакции в 1.9 раза дороже** легитимных ($874.61 vs $459.78)
- **Максимальные суммы мошеннических транзакций в 5 раз больше** ($15,781.54 vs $3,170.58)
- **Высокая вариативность** сумм мошеннических транзакций

#### Географические риски:
- **Высокий риск:** MXN (38.03%), BRL (37.11%), RUB (37.72%), NGN (35.14%)
- **Низкий риск:** SGD (6.36%), GBP (6.94%), EUR (7.00%), CAD (7.00%)

#### Ключевые корреляции:
- **Транзакции за пределами страны:** 0.635 (сильная положительная)
- **Карта не присутствует:** 0.618 (сильная положительная)
- **Сумма транзакции:** 0.228 (умеренная положительная)
- **Время суток:** -0.280 (умеренная отрицательная)

### 3. Размер датасета
- **Общее количество транзакций:** 7,483,766
- **Мошеннических транзакций:** 1,494,719 (20%)
- **Легитимных транзакций:** 5,989,047 (80%)
- **Период:** 30 дней (сентябрь-октябрь 2024)

## Продуктовые гипотезы

Разработано **6 продуктовых гипотез** с приоритизацией:

### Высокий приоритет:
1. **Географический риск** (корреляция 0.635)
2. **Карточный риск** (корреляция 0.618)
3. **Валютный риск** (до 38% мошенничества)

### Средний приоритет:
4. **Суммовой риск** (корреляция 0.228)
5. **Канальный риск** (100% для POS)

### Низкий приоритет:
6. **Ночное мошенничество** (корреляция -0.280)

**Подробности:** см. файл `product_hypotheses.md`

## Технические гипотезы

Разработано **6 технических гипотез** для реализации системы:

### Высокий приоритет:
1. **Машинное обучение** (основа системы)
2. **Real-time Detection** (критично для бизнеса)
3. **Feature Engineering** (улучшение качества)

### Средний приоритет:
4. **Ensemble Methods** (стабильность)
5. **Anomaly Detection** (новые угрозы)

### Низкий приоритет:
6. **Explainable AI** (регулятивные требования)

**Подробности:** см. файл `technical_hypotheses.md`

## Запуск анализа

### Требования
```bash
pip install pandas numpy matplotlib seaborn
```

### Выполнение
```bash
cd eda
python eda.py
```

### Результаты
- `eda/eda_results.txt` - полные результаты анализа
- `eda/analysis_with_usd_conversion.md` - анализ с конвертацией в USD
- `eda/plots/` - 9 графиков и визуализаций

## Бизнес-ценность

### Финансовая защита:
- **Средняя экономия на транзакции:** $414.83
- **Потенциальная экономия:** Миллионы долларов при правильном обнаружении

### Операционная эффективность:
- Фокус на высокорисковых валютах для оптимизации ресурсов
- Автоматизация проверок для низкорисковых транзакций

### Стратегическое планирование:
- Географическая экспансия с учетом валютных рисков
- Продуктовое развитие с учетом паттернов мошенничества

## Рекомендации для реализации

### Высокоприоритетные правила:
1. **Суммы > $1,000** - повышенное внимание
2. **Транзакции в MXN, BRL, RUB, NGN** - дополнительная проверка
3. **Транзакции за пределами страны** - обязательная верификация
4. **Транзакции без карты** - повышенный риск

### Моделирование:
1. **Использовать конвертированные суммы** в USD для обучения моделей
2. **Добавить признаки валютного риска** на основе исходной валюты
3. **Учитывать временные паттерны** (ночные транзакции менее рискованны)

## Файлы результатов

### Основные файлы:
- `eda/eda_results.txt` - полные результаты EDA (508 строк)
- `eda/analysis_with_usd_conversion.md` - анализ с конвертацией в USD
- `product_hypotheses.md` - 6 продуктовых гипотез с обоснованием
- `technical_hypotheses.md` - 6 технических гипотез с планом реализации

### Визуализации:
- `fraud_distribution.png` - распределение мошеннических транзакций
- `temporal_analysis.png` - временной анализ
- `amount_analysis.png` - анализ сумм (в USD)
- `categorical_analysis.png` - анализ категориальных переменных
- `geographical_analysis.png` - географический анализ
- `activity_analysis.png` - анализ активности
- `correlation_matrix.png` - корреляционная матрица
- `fraud_correlations.png` - корреляции с мошенничеством
- `missing_values.png` - анализ пропущенных значений

## Заключение

Проведен комплексный анализ данных транзакций с конвертацией всех сумм в доллары США. Выявлены ключевые паттерны мошенничества и разработаны обоснованные продуктовые и технические гипотезы для создания эффективной системы обнаружения мошенничества.

**Основные достижения:**
- ✅ Выявление 6 ключевых паттернов мошенничества
- ✅ Разработка 6 продуктовых гипотез с приоритизацией
- ✅ Создание 6 технических гипотез с планом реализации
- ✅ Создание 9 визуализаций для понимания данных
- ✅ Полная документация процесса и результатов